(this.webpackJsonpmedplan=this.webpackJsonpmedplan||[]).push([[0],{105:function(e,t,a){},106:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(24),i=a.n(r),s=(a(75),a(8)),o=a(9),c=a(11),m=a(10),d=a(14),p=a(111),u=a(110),g=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"navbar-all"},l.a.createElement("div",{className:"navbar-logo"},l.a.createElement(d.b,{to:"/"},l.a.createElement("img",{src:"../images/logo-transparent.png",alt:"logo",className:"header-logo"}))),l.a.createElement("div",{className:"navbar-menu"},"patient"===this.props.usertype?l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{expand:"lg"},l.a.createElement(p.a.Toggle,{"aria-controls":"basic-navbar-nav"}),l.a.createElement(p.a.Collapse,{id:"basic-navbar-nav"},l.a.createElement(u.a,{variant:"tabs",className:"mr-auto"},l.a.createElement(u.a.Item,{className:"nav-item"},l.a.createElement(d.b,{to:"/"},l.a.createElement(u.a.Link,{className:"nav-link",href:"/"},"Search doctor"))),l.a.createElement(u.a.Item,{className:"nav-item"},l.a.createElement(d.b,{to:"/profile"},l.a.createElement(u.a.Link,{className:"nav-link",href:"/profile"},"Profile"))),l.a.createElement(u.a.Item,{className:"nav-item"},l.a.createElement(d.b,{to:"/appointments"},l.a.createElement(u.a.Link,{className:"nav-link",href:"/appointments"},"Appointments"))),l.a.createElement(u.a.Item,{className:"nav-item"},l.a.createElement(d.b,{to:"/medication-planner"},l.a.createElement(u.a.Link,{className:"nav-link",href:"/medication-planner"},"Planner"))),l.a.createElement(u.a.Item,{className:"nav-item"},l.a.createElement(u.a.Link,{onClick:this.props.onLogout},"Log Out")))))):null,"doctor"===this.props.usertype?l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{expand:"lg"},l.a.createElement(p.a.Toggle,{"aria-controls":"basic-navbar-nav"}),l.a.createElement(p.a.Collapse,{id:"basic-navbar-nav"},l.a.createElement(u.a,{variant:"tabs",className:"mr-auto"},l.a.createElement(u.a.Item,{className:"nav-item"},l.a.createElement(d.b,{to:"/calendar"},l.a.createElement(u.a.Link,{className:"nav-link",href:"/calendar"},"Calendar"))),l.a.createElement(u.a.Item,{className:"nav-item"},l.a.createElement(d.b,{to:"/doctor/".concat(this.props.loggedInUser._id)},l.a.createElement(u.a.Link,{className:"nav-link",href:"/doctor/".concat(this.props.loggedInUser._id)},"Profile"))),l.a.createElement(u.a.Item,{className:"nav-item"},l.a.createElement(u.a.Link,{onClick:this.props.onLogout},"LOG OUT")))))):null,this.props.loggedInUser?null:l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{expand:"lg"},l.a.createElement(p.a.Toggle,{"aria-controls":"basic-navbar-nav"}),l.a.createElement(p.a.Collapse,{id:"basic-navbar-nav"},l.a.createElement(u.a,{variant:"tabs",className:"mr-auto"},l.a.createElement(u.a.Item,{className:"nav-item"},l.a.createElement(d.b,{to:"/signup"},l.a.createElement(u.a.Link,{className:"nav-link",href:"/signup"},"SIGN UP"))),l.a.createElement(u.a.Item,{className:"nav-item"},l.a.createElement(d.b,{to:"/login"},l.a.createElement(u.a.Link,{className:"nav-link",href:"/login"},"LOG IN")))))))))}}]),a}(n.Component),h=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"main-content"},this.props.doctorList.map((function(e){return l.a.createElement("div",{className:"home-doctor-card"},l.a.createElement("img",{className:"doc-img",src:e.picture,alt:"profile picture"}),l.a.createElement("div",{className:"search-doc-details-text"},l.a.createElement("p",null,l.a.createElement("strong",null,e.username)),l.a.createElement("p",null,e.speciality),l.a.createElement("p",null,l.a.createElement("em",null,e.city)),l.a.createElement("p",null,"From ",e.openingTime," to ",e.closingTime)),l.a.createElement(d.b,{to:"/doctor/".concat(e._id)},l.a.createElement("button",{className:"button"},"Book an appointment")))})),l.a.createElement("script",{async:!0,defer:!0,src:"https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap",type:"text/javascript"}))}}]),a}(n.Component),E="https://medplan-app.herokuapp.com/api",f=a(7),b=a.n(f),y=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={doctors:[],filteredDoctors:[],specialityQuery:"",cityQuery:""},e.handleChange=function(t){var a=t.currentTarget.name,n=t.currentTarget.value;"city"===a?e.setState({cityQuery:n},(function(){return e.handleSearch()})):e.setState({specialityQuery:n},(function(){return e.handleSearch()}))},e.handleSearch=function(t){var a=e.state.doctors.filter((function(t){return!(!t.speciality||!t.city)&&(t.speciality.toLowerCase().includes(e.state.specialityQuery.toLowerCase())&&t.city.toLowerCase().includes(e.state.cityQuery.toLowerCase()))}));e.setState({filteredDoctors:a})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.get("".concat(E,"/doctor/search")).then((function(t){e.setState({doctors:t.data,filteredDoctors:t.data})}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"index-info-card"},l.a.createElement("div",{className:"index-img-card"},l.a.createElement("img",{src:"/images/doctors.png",alt:"img"}),l.a.createElement("p",null,"Thousands of doctors available on the platform.")),l.a.createElement("div",{className:"index-img-card"},l.a.createElement("img",{src:"/images/online-booking.png",alt:"img"}),l.a.createElement("p",null,"Easy online booking without struggle and 24/7!")),l.a.createElement("div",{className:"index-img-card"},l.a.createElement("img",{src:"/images/prescription.png",alt:"img"}),l.a.createElement("p",null,"Direct access to your prescriptions."))),l.a.createElement("div",{className:"home-search-bar"},l.a.createElement("input",{className:"input-search",onChange:this.handleChange,name:"speciality",type:"text",placeholder:"Search by speciality"}),l.a.createElement("input",{className:"input-search",onChange:this.handleChange,name:"city",type:"text",placeholder:"Search by city"})),l.a.createElement(h,{doctorList:this.state.filteredDoctors}))}}]),a}(n.Component),v=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={passwordStrength:"",displayError:!0},e}return Object(o.a)(a,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Sign Up"),l.a.createElement("form",{onSubmit:this.props.onSignUp,className:"main-content sign-log-form"},l.a.createElement("div",{className:"user-type-choice"},l.a.createElement("label",{className:"label-user",htmlfor:"usertype"},"I am a "),l.a.createElement("select",{className:"button",name:"usertype"},l.a.createElement("option",{className:"user-type-choice",value:"patient"},"Patient"),l.a.createElement("option",{className:"user-type-choice",value:"doctor"},"Doctor"))),l.a.createElement("label",{className:"login-label"},"Full name"),l.a.createElement("input",{onChange:this.props.onClear,name:"username",type:"text"}),l.a.createElement("label",{className:"login-label"},"Email"),l.a.createElement("input",{onChange:this.props.onClear,name:"email",type:"email"}),l.a.createElement("label",{className:"login-label"},"Password"),l.a.createElement("em",null,l.a.createElement("small",null,"Password needs to be at least 8 characters, and include both lower and upper cases, numbers and special signs.")),l.a.createElement("input",{onChange:this.props.onPass,name:"password",type:"password"}),l.a.createElement("small",null,this.props.passwordStrength),l.a.createElement("div",{className:"sign-log-btn-line"},l.a.createElement("button",{className:"button",type:"submit"},"Submit"),l.a.createElement(d.b,{to:"/login"},l.a.createElement("button",{className:"button"},"Or Log In!")))),l.a.createElement("p",null,this.props.errorMsg))}}]),a}(n.Component),N=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Log In"),l.a.createElement("form",{onSubmit:this.props.onLogIn,className:"main-content sign-log-form"},l.a.createElement("div",{className:"user-type-choice"},l.a.createElement("label",{className:"label-user",for:"usertype"},"I am a "),l.a.createElement("select",{className:"button",name:"usertype"},l.a.createElement("option",{className:"user-type-choice",value:"patient"},"Patient"),l.a.createElement("option",{className:"user-type-choice",value:"doctor"},"Doctor"))),l.a.createElement("label",{className:"login-label"},"Email"),l.a.createElement("input",{onChange:this.props.onClear,name:"email",type:"email"}),l.a.createElement("label",{className:"login-label"},"Password"),l.a.createElement("input",{onChange:this.props.onClear,name:"password",type:"password"}),l.a.createElement("div",{className:"sign-log-btn-line"},l.a.createElement("button",{className:"button",type:"submit"},"Submit"),l.a.createElement(d.b,{to:"/signup"},l.a.createElement("button",{className:"button"},"Or Sign Up!")))),l.a.createElement("p",null,this.props.errorMsg))}}]),a}(n.Component),C=a(25),I=a(21),k=a(17),w=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={patient:{},updatedField:{},editing:!1,unedited:""},e.handleChange=function(t){var a=t.currentTarget,n=a.name,l=a.value;e.setState({updatedField:Object(k.a)({},n,l),patient:Object(I.a)(Object(I.a)({},e.state.patient),{},Object(k.a)({},n,l))})},e.handleEnable=function(t){if(!e.state.editing){var a=t.getElementsByTagName("BUTTON");t.getElementsByTagName("INPUT")[0].readOnly=!1,t.getElementsByTagName("INPUT")[0].classList.toggle("readonly-field");var n,l=t.getElementsByTagName("INPUT")[0].value,r=Object(C.a)(a);try{for(r.s();!(n=r.n()).done;){n.value.classList.toggle("hidden-button")}}catch(i){r.e(i)}finally{r.f()}e.setState({editing:!e.state.editing,unedited:l})}},e.handleDisable=function(t){var a,n=t.getElementsByTagName("BUTTON");t.getElementsByTagName("INPUT")[0].readOnly=!0,t.getElementsByTagName("INPUT")[0].classList.toggle("readonly-field");var l,r=t.getElementsByTagName("INPUT")[0].name,i=Object(C.a)(n);try{for(i.s();!(l=i.n()).done;){l.value.classList.toggle("hidden-button")}}catch(s){i.e(s)}finally{i.f()}e.setState({editing:!e.state.editing,patient:Object(I.a)(Object(I.a)({},e.state.patient),{},(a={},Object(k.a)(a,r,e.state.unedited),Object(k.a)(a,"updatedField",{}),a))})},e.handleEdit=function(t,a){var n=Object.keys(t)[0],l=Object.values(t)[0];b.a.patch("".concat(E,"/patient/").concat(e.props.loggedInUser._id),Object(k.a)({},n,l),{withCredentials:!0});var r=a.getElementsByTagName("BUTTON");a.getElementsByTagName("INPUT")[0].classList.toggle("readonly-field");var i,s=Object(C.a)(r);try{for(s.s();!(i=s.n()).done;){i.value.classList.toggle("hidden-button")}}catch(o){s.e(o)}finally{s.f()}e.setState({editing:!e.state.editing})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.get("".concat(E,"/planner"),{withCredentials:!0}).then((function(t){e.setState({patient:t.data})}))}},{key:"render",value:function(){var e=this;if(!this.props.loggedInUser)return l.a.createElement(N,null);if(!this.state.patient)return l.a.createElement("img",{src:"../images/loader.gif",alt:"loader"});var t=this.state.patient,a=t.username,n=t.birthDate,r=t.height,i=t.weight,s=t.allergies,o=t.history,c=t.phoneNumber,m=t.address,d=t.email;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Profile"),l.a.createElement("div",{className:"main-content profile-page-content"},l.a.createElement("div",{className:"profile-field",id:"name-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"Full Name")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"username",type:"text",value:a,onChange:this.handleChange}),l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("name-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("name-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("name-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))),l.a.createElement("div",{className:"profile-field",id:"birthDate-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"Birth Date")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"birthDate",type:"text",value:n,onChange:this.handleChange}),l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("birthDate-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("birthDate-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("birthDate-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))),l.a.createElement("div",{className:"profile-field",id:"address-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"Address")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"address",type:"text",value:m,onChange:this.handleChange}),l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("address-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("address-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("address-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))),l.a.createElement("div",{className:"profile-field",id:"email-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"E-Mail")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"email",type:"email",value:d,onChange:this.handleChange}),l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("email-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("email-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("email-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))),l.a.createElement("div",{className:"profile-field",id:"phoneNumber-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"Telephone")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"phoneNumber",type:"text",value:c,onChange:this.handleChange}),l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("phoneNumber-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("phoneNumber-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("phoneNumber-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))),l.a.createElement("div",{className:"profile-field",id:"height-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"Height (cm)")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"height",type:"text",value:r,onChange:this.handleChange}),l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("height-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("height-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("height-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))),l.a.createElement("div",{className:"profile-field",id:"weight-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"Weight (kg)")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"weight",type:"text",value:i,onChange:this.handleChange}),l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("weight-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("weight-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("weight-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))),l.a.createElement("div",{className:"profile-field",id:"allergies-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"Allergies")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"allergies",type:"text",value:s,onChange:this.handleChange}),l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("allergies-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("allergies-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("allergies-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))),l.a.createElement("div",{className:"profile-field",id:"history-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"Medical History")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"history",type:"text",value:o,onChange:this.handleChange}),l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("history-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("history-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("history-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"})))))}}]),a}(n.Component),O=a(4),D=a.n(O),T=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={loggedInUser:e.props.loggedInUser,usertype:e.props.usertype,appointments:null,report:null},e.handleDownload=function(t,a){t.preventDefault(),b.a.get("".concat(E,"/patient/appointment/report/").concat(a),{withCredentials:!0}).then((function(t){e.setState({report:t.data.report}),window.open(e.state.report,"_blank")}))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.get("".concat(E,"/patient/appointments"),{withCredentials:!0}).then((function(t){var a=JSON.parse(JSON.stringify(t.data));a.sort((function(e,t){return D()(t.time)-D()(e.time)})),e.setState({appointments:a})}))}},{key:"render",value:function(){var e=this;return this.state.appointments?l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Appointments"),this.state.appointments.map((function(t){var a,n=D()(t.time).local().format("Do MMM YYYY"),r=D()(t.time).local().format("HH:mm");return a=t.time>Date.now()?D()(t.time).local().toNow():D()(t.time).local().fromNow(),l.a.createElement("div",{className:"main-content"},l.a.createElement("div",{className:"appointment-card"},l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement("strong",null,"On: ",n," at ",r,", ",a)),l.a.createElement("p",null,"With ",l.a.createElement("strong",null,"Dr. ",t.doctor.username)),l.a.createElement("p",null,l.a.createElement("strong",null,"Specialized in: "),t.doctor.speciality),l.a.createElement("p",null,l.a.createElement("strong",null,"Purpose: "),t.reason),l.a.createElement("p",null,l.a.createElement("strong",null,"Located at: "),t.doctor.address)),t.report?l.a.createElement("button",{className:"button",onClick:function(a){return e.handleDownload(a,t._id)}},"See Report"):l.a.createElement("button",{className:"button disabled",disabled:!0},"No Report")))}))):l.a.createElement("img",{src:"../images/loader.gif",alt:"loader"})}}]),a}(n.Component),S=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={patient:{},currentday:D()(Date.now())},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.get("".concat(E,"/planner"),{withCredentials:!0}).then((function(t){e.setState({patient:t.data},(function(){var t=e.state.patient.prescriptions.map((function(e){return e.medications})).flat().filter((function(t){return D()(e.state.currentday).isBefore(t.endDate)&&D()(t.startDate).isBefore(e.state.currentday)&&e.state.currentday.diff(D()(t.startDate),"days")%t.daysPerTake===0}));e.setState({currentmeds:t})}))}))}},{key:"previousDay",value:function(){var e=this;this.setState({currentday:this.state.currentday.subtract(1,"day")});var t=this.state.patient.prescriptions.map((function(e){return e.medications})).flat().filter((function(t){return D()(e.state.currentday).isBefore(t.endDate)&&D()(t.startDate).isBefore(e.state.currentday)&&e.state.currentday.diff(D()(t.startDate),"days")%t.daysPerTake===0}));this.setState({currentmeds:t})}},{key:"nextDay",value:function(){var e=this;this.setState({currentday:this.state.currentday.add(1,"day")});var t=this.state.patient.prescriptions.map((function(e){return e.medications})).flat().filter((function(t){return D()(e.state.currentday).isBefore(t.endDate)&&D()(t.startDate).isBefore(e.state.currentday)&&e.state.currentday.diff(D()(t.startDate),"days")%t.daysPerTake===0}));this.setState({currentmeds:t})}},{key:"render",value:function(){var e=this;return this.state.currentmeds?l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,"Medication Planner"),l.a.createElement("div",{className:"patient-cal-date-field"},l.a.createElement("button",{className:"button calendar-day",onClick:function(){return e.previousDay()}},"<"),l.a.createElement("h4",null,this.state.currentday.format("Do MMM, YYYY").toString()),l.a.createElement("button",{className:"button calendar-day",onClick:function(){return e.nextDay()}},">")),l.a.createElement("div",{className:"main-content patient-cal-day-times"},l.a.createElement("h4",{className:"time-planner"},"Morning"),this.state.currentmeds.map((function(e){if(3===e.takesPerDay||2===e.takesPerDay)return l.a.createElement("div",null,l.a.createElement("p",null,e.name," -  ",e.dosePerTake," - Note: ",e.comments))})),l.a.createElement("hr",null),l.a.createElement("h4",{className:"time-planner"},"Noon"),this.state.currentmeds.map((function(e){if(3===e.takesPerDay||1===e.takesPerDay)return l.a.createElement("div",null,l.a.createElement("p",null,e.name," -  ",e.dosePerTake," - Note: ",e.comments))})),l.a.createElement("hr",null),l.a.createElement("h4",{className:"time-planner"},"Night"),this.state.currentmeds.map((function(e){if(3===e.takesPerDay||2===e.takesPerDay)return l.a.createElement("div",null,l.a.createElement("p",null,e.name," -  ",e.dosePerTake," - Note: ",e.comments))})))):l.a.createElement("img",{src:"../images/loader.gif",alt:"loader"})}}]),a}(n.Component),B=a(42),j=a(34),U=a(43),P=a(44),F=0;function M(){return String(F++)}var L=a(40),x=a(109),A=a(108),_=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={doctor:{},weekendsVisible:!1,currentEvents:[],updatedField:{},editing:!1,unedited:"",appointments:[],events:[],showError:!1,showReason:!1,showDelete:!1,showLength:!1},e.handleChange=function(t){var a=t.currentTarget,n=a.name,l=a.value;e.setState({updatedField:Object(k.a)({},n,l),doctor:Object(I.a)(Object(I.a)({},e.state.doctor),{},Object(k.a)({},n,l))})},e.handleEnable=function(t){if(!e.state.editing){var a=t.getElementsByTagName("BUTTON");t.getElementsByTagName("INPUT")[0].readOnly=!1,t.getElementsByTagName("INPUT")[0].classList.toggle("readonly-field");var n,l=t.getElementsByTagName("INPUT")[0].value,r=Object(C.a)(a);try{for(r.s();!(n=r.n()).done;){n.value.classList.toggle("hidden-button")}}catch(i){r.e(i)}finally{r.f()}e.setState({editing:!e.state.editing,unedited:l})}},e.handleDisable=function(t){var a,n=t.getElementsByTagName("BUTTON");t.getElementsByTagName("INPUT")[0].readOnly=!0,t.getElementsByTagName("INPUT")[0].classList.toggle("readonly-field");var l,r=t.getElementsByTagName("INPUT")[0].name,i=Object(C.a)(n);try{for(i.s();!(l=i.n()).done;){l.value.classList.toggle("hidden-button")}}catch(s){i.e(s)}finally{i.f()}e.setState({editing:!e.state.editing,doctor:Object(I.a)(Object(I.a)({},e.state.doctor),{},(a={},Object(k.a)(a,r,e.state.unedited),Object(k.a)(a,"updatedField",{}),a))})},e.handleEdit=function(t,a){var n=Object.keys(t)[0],l=Object.values(t)[0];b.a.patch("".concat(E,"/doctor/").concat(e.props.match.params.doctorId),Object(k.a)({},n,l),{withCredentials:!0});var r=a.getElementsByTagName("BUTTON");a.getElementsByTagName("INPUT")[0].classList.toggle("readonly-field");var i,s=Object(C.a)(r);try{for(s.s();!(i=s.n()).done;){i.value.classList.toggle("hidden-button")}}catch(o){s.e(o)}finally{s.f()}e.setState({editing:!e.state.editing})},e.handleImgEnable=function(t){t.getElementsByTagName("INPUT")[0].classList.toggle("hidden-button"),t.getElementsByTagName("BUTTON")[1].classList.toggle("hidden-button"),e.setState({editing:!e.state.editing})},e.handleImgEdit=function(t){if(t){var a,n=t.getElementsByTagName("INPUT")[0].files[0],l=new FormData;l.append("imageUrl",n),t.getElementsByTagName("INPUT")[0].classList.toggle("hidden-button"),t.getElementsByTagName("BUTTON")[1].classList.toggle("hidden-button"),b.a.post("".concat(E,"/upload"),l).then((function(t){a=t.data.image,b.a.patch("".concat(E,"/doctor/").concat(e.props.match.params.doctorId),{picture:t.data.image},{withCredentials:!0})})).then((function(t){e.setState({doctor:Object(I.a)(Object(I.a)({},e.state.doctor),{},{picture:a})})}))}},e.handleDateSelect=function(t){var a=t.view.calendar;if(a.unselect(),D()(new Date(t.startStr)).isBefore(Date.now()))e.setState({showError:!0});else{if(t.end-t.start>18e5)return void e.setState({showLength:!0});e.setState({showReason:!0,calendarApi:a,selectInfo:t})}},e.handleEventClick=function(t){t.event.extendedProps.patient._id!==e.props.loggedInUser._id&&t.event.extendedProps.patient!==e.props.loggedInUser._id||!D()(t.event.startStr).isAfter(D()(Date.now()))||e.setState({showDelete:!0,eventDelete:t.event})},e.handleEvents=function(t){e.setState({currentEvents:t})},e.appoCreate=function(t){b.a.post("".concat(E,"/patient/appointments/").concat(e.props.match.params.doctorId),{time:t.event.start,eventId:t.event.id,reason:t.event.title},{withCredentials:!0})},e.appoEdit=function(t){b.a.patch("".concat(E,"/patient/appointments/").concat(e.props.match.params.doctorId),{time:t.event.start,eventId:t.event.id,reason:t.event.title},{withCredentials:!0})},e.appoCancel=function(t){b.a.delete("".concat(E,"/patient/appointments/").concat(e.props.match.params.doctorId,"/").concat(t.event.id),{withCredentials:!0})},e.handleClose=function(){e.setState({showError:!1,showReason:!1,showDelete:!1,showLength:!1})},e.handleCloseDelete=function(){e.setState({showDelete:!1}),e.state.eventDelete.remove(),e.setState({eventDelete:{}})},e.handleCloseReason=function(t){t&&e.state.calendarApi.addEvent({id:M(),title:t,start:e.state.selectInfo.startStr,end:e.state.selectInfo.endStr,patient:e.props.loggedInUser._id,startEditable:!0,editable:!1}),e.setState({showReason:!1})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.get("".concat(E,"/doctor/").concat(this.props.match.params.doctorId),{withCredentials:!0}).then((function(t){e.setState({doctor:t.data})})),b.a.get("".concat(E,"/doctor/appointments/").concat(this.props.match.params.doctorId),{withCredentials:!0}).then((function(t){e.setState({appointments:t.data,events:t.data.map((function(t){var a=t.patient._id===e.props.loggedInUser._id?"#51B8F9":"gray",n=t.patient_id===e.props.loggedInUser._id;return{title:t.reason,start:t.time,id:t.eventId,startEditable:n,patient:t.patient,color:a}}))})}))}},{key:"render",value:function(){var e=this;if(!this.state.doctor)return l.a.createElement("img",{src:"../images/loader.gif",alt:"loader"});var t=this.state.doctor,a=t.username,n=t.speciality,r=t.city,i=t.address,s=t.email,o=t.phone,c=t.openingTime,m=t.closingTime,d=t.picture;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Doctor Profile"),l.a.createElement("div",{className:"main-content profile-page-content"},l.a.createElement("div",{className:"profile-field profile-field-img",id:"image-profile"},l.a.createElement("img",{src:d,alt:"",className:"doc-img"}),this.props.loggedInUser._id===this.props.match.params.doctorId?l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleImgEnable(document.getElementById("image-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("input",{autocomplete:"off",type:"file",className:"form-control hidden-button",name:"image",id:"image"}),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleImgEdit(document.getElementById("image-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))):null),l.a.createElement("div",{className:"profile-field",id:"name-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"Name")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"username",type:"text",value:a,onChange:this.handleChange}),this.props.loggedInUser._id===this.props.match.params.doctorId?l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("name-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("name-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("name-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))):null),l.a.createElement("div",{className:"profile-field",id:"speciality-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"Speciality")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"speciality",type:"text",value:n,onChange:this.handleChange}),this.props.loggedInUser._id===this.props.match.params.doctorId?l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("speciality-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("speciality-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("speciality-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))):null),l.a.createElement("div",{className:"profile-field",id:"city-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"City")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"city",type:"text",value:r,onChange:this.handleChange}),this.props.loggedInUser._id===this.props.match.params.doctorId?l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("city-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("city-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("city-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))):null),l.a.createElement("div",{className:"profile-field",id:"address-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"Address")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"address",type:"text",value:i,onChange:this.handleChange}),this.props.loggedInUser._id===this.props.match.params.doctorId?l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("address-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("address-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("address-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))):null),l.a.createElement("div",{className:"profile-field",id:"email-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"E-Mail")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"email",type:"email",value:s,onChange:this.handleChange}),this.props.loggedInUser._id===this.props.match.params.doctorId?l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("email-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("email-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("email-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))):null),l.a.createElement("div",{className:"profile-field",id:"phone-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"Telephone")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"phone",type:"text",value:o,onChange:this.handleChange}),this.props.loggedInUser._id===this.props.match.params.doctorId?l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("phone-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("phone-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("phone-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))):null),l.a.createElement("div",{className:"profile-field",id:"opening-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"Opening time")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"openingTime",type:"text",value:c,onChange:this.handleChange}),this.props.loggedInUser._id===this.props.match.params.doctorId?l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("opening-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("opening-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("opening-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))):null),l.a.createElement("div",{className:"profile-field",id:"closing-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"Closing time")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"closingTime",type:"text",value:m,onChange:this.handleChange}),this.props.loggedInUser._id===this.props.match.params.doctorId?l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("closing-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("closing-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("closing-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))):null),l.a.createElement("div",{className:"booking-card"},"patient"===this.props.usertype?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"booking-instr-card"},l.a.createElement("h4",null,"Booking Instructions"),l.a.createElement("ul",{className:"booking-instructions-text"},l.a.createElement("li",null,"Select the time slot by clicking on it"),l.a.createElement("li",null,"A pop-up appears, enter the purpose of the appointment"),l.a.createElement("li",null,'Click "ok" to valid the booking'),l.a.createElement("li",null,"You can:"),l.a.createElement("ul",null,l.a.createElement("li",null,"Modify the appointment time and date by dragging it to another available slot"),l.a.createElement("li",null,"Cancel the appointment, by clicking on it a pop will appear to confirm the cancellation")))),l.a.createElement("div",{className:"calendar-card"},l.a.createElement(B.a,{plugins:[j.b,U.a,P.a,L.a],headerToolbar:{left:"prev",center:"title",right:"next"},initialView:"timeGridWeek",titleFormat:"Do MMM YYYY",dayHeaderFormat:"DD/MM",selectable:!0,selectMirror:!1,dayMaxEvents:!0,allDaySlot:!1,eventStartEditable:!0,slotMinTime:"08:00",slotMaxTime:"20:00",businessHours:{daysOfWeek:[1,2,3,4,5],startTime:this.state.doctor.openingTime,endTime:this.state.doctor.closingTime},eventConstraint:{start:Date.now(),end:"2100-01-01",businessHours:{daysOfWeek:[1,2,3,4,5],startTime:this.state.doctor.openingTime,endTime:this.state.doctor.closingTime}},weekends:this.state.weekendsVisible,events:this.state.events,select:this.handleDateSelect,eventContent:Y,eventClick:this.handleEventClick,eventsSet:this.handleEvents,eventAdd:function(t){return e.appoCreate(t)},eventChange:function(t){return e.appoEdit(t)},eventRemove:function(t){return e.appoCancel(t)},defaultTimedEventDuration:"00:30"}))):null),l.a.createElement(x.a,{show:this.state.showError,onHide:this.handleClose},l.a.createElement(x.a.Body,null,"Please enter a valid date."),l.a.createElement(x.a.Footer,null,l.a.createElement(A.a,{variant:"primary",onClick:this.handleClose},"OK"))),l.a.createElement(x.a,{show:this.state.showLength,onHide:this.handleClose},l.a.createElement(x.a.Body,null,"Appointments can't be longer than thirty minutes."),l.a.createElement(x.a.Footer,null,l.a.createElement(A.a,{variant:"primary",onClick:this.handleClose},"OK"))),l.a.createElement(x.a,{show:this.state.showDelete,onHide:this.handleClose},l.a.createElement(x.a.Body,null,"Are you sure you want to cancel your appointment?"),l.a.createElement(x.a.Footer,null,l.a.createElement(A.a,{variant:"primary",onClick:this.handleClose},"BACK"),l.a.createElement(A.a,{variant:"danger",onClick:this.handleCloseDelete},"I AM SURE"))),l.a.createElement(x.a,{show:this.state.showReason,onHide:this.handleClose},l.a.createElement(x.a.Body,null,l.a.createElement("p",null,"What is the reason for your appointment?"),l.a.createElement("input",{name:"reason",id:"reasonAppo"})),l.a.createElement(x.a.Footer,null,l.a.createElement(A.a,{variant:"primary",onClick:this.handleClose},"BACK"),l.a.createElement(A.a,{variant:"success",onClick:function(){return e.handleCloseReason(document.getElementById("reasonAppo").value)}},"OK")))))}}]),a}(n.Component);function Y(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("b",null,e.timeText))}var R=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={doctor:{},weekendsVisible:!1,currentEvents:[],updatedField:{},editing:!1,unedited:"",appointments:[],events:[]},e.handleEventClick=function(t){e.props.history.push("/calendar/".concat(t.event.extendedProps.appointment))},e.handleEvents=function(t){e.setState({currentEvents:t})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.get("".concat(E,"/doctor/").concat(this.props.loggedInUser._id),{withCredentials:!0}).then((function(t){e.setState({doctor:t.data})})),b.a.get("".concat(E,"/doctor/appointments/").concat(this.props.loggedInUser._id),{withCredentials:!0}).then((function(t){e.setState({appointments:t.data,events:t.data.map((function(e){return{title:e.reason,start:e.time,id:e.eventId,editable:!1,patient:e.patient,appointment:e._id}}))})}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Calendar"),l.a.createElement(B.a,{plugins:[j.b,U.a,P.a,L.a],headerToolbar:{left:"prev",center:"title",right:"next"},titleFormat:"DD/MM/YYYY",initialView:"timeGridDay",selectMirror:!0,dayMaxEvents:!0,allDaySlot:!1,eventDurationEditable:!1,slotMinTime:"08:00",slotMaxTime:"20:00",businessHours:{businessHours:{daysOfWeek:[1,2,3,4,5],startTime:"".concat(this.state.doctor.openingTime),endTime:this.state.doctor.closingTime}},weekends:this.state.weekendsVisible,events:this.state.events,eventContent:H,eventClick:this.handleEventClick,eventsSet:this.handleEvents,defaultTimedEventDuration:"00:30"}))}}]),a}(n.Component);function H(e){return l.a.createElement("div",{className:"event-content"},l.a.createElement("b",null,e.timeText),l.a.createElement("i",null,e.event.extendedProps.patient.username),l.a.createElement("i",null,e.event.title))}var W=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={},e.cancelAppointment=function(t){window.confirm("Are you sure you want to cancel the appointment?")&&b.a.delete("".concat(E,"/cancel/").concat(e.props.match.params.appointmentId),{withCredentials:!0}).then((function(){return e.props.history.push("/calendar")}))},e.toggleLoader=function(e){e.classList.toggle("hidden-button")},e.loadReport=function(t){var a=t.getElementsByTagName("INPUT")[0].files[0],n=new FormData;n.append("imageUrl",a),b.a.post("".concat(E,"/upload"),n).then((function(t){b.a.patch("".concat(E,"/append-report/").concat(e.props.match.params.appointmentId),{report:t.data.image},{withCredentials:!0})})).then((function(){e.toggleLoader(t),window.location.reload()}))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.get("".concat(E,"/doctor/appointment/").concat(this.props.match.params.appointmentId),{withCredentials:!0}).then((function(t){return e.setState({appointment:t.data})}))}},{key:"render",value:function(){var e=this;if(!this.state.appointment)return l.a.createElement("img",{src:"../images/loader.gif",alt:"loader"});var t,a=this.state.appointment.patient,n=a.username,r=a.phoneNumber,i=a.email,s=a.allergies,o=a.history,c=this.state.appointment,m=c.time,p=c.reason,u=D()(m).local().format("Do MMM YYYY"),g=D()(m).local().format("HH:mm");return t=m>Date.now()?D()(m).local().toNow():D()(m).local().fromNow(),l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null," Appointment Details"),l.a.createElement("div",{className:"main-content appointment-details-card"},l.a.createElement("div",{className:"top-card-app-details"},l.a.createElement("p",null,"On: ",u," at ",g,", ",t),l.a.createElement("p",null,"Reason: ",p)),l.a.createElement("div",{className:"bottom-card-app-details"},l.a.createElement("div",null,l.a.createElement("h3",null,"Patient information"),l.a.createElement("p",null,"Name: ",n),l.a.createElement("p",null,"Phone: ",r),l.a.createElement("p",null,"Email: ",i),l.a.createElement("p",null,"Allergies: ",s),l.a.createElement("p",null,"Medical History: ",o)),l.a.createElement("div",{className:"btn-app-details"},this.state.appointment.prescription?l.a.createElement("button",{disabled:!0,className:"button disabled"},"Prescription added"):l.a.createElement(d.b,{to:"/create-prescription/".concat(this.props.match.params.appointmentId)},l.a.createElement("button",{className:"button"},"Create Prescription")),D()(this.state.appointment.time)>D()(Date.now())?l.a.createElement("button",{className:"button",onClick:function(){return e.cancelAppointment(e.props.match.params.appointmentId)}},"Cancel appointment"):l.a.createElement("button",{disabled:!0,className:"button disabled",onClick:function(){return e.cancelAppointment(e.props.match.params.appointmentId)}},"Cancel appointment"))),l.a.createElement("div",{className:"report-upload"},l.a.createElement("button",{className:"button",onClick:function(){return e.toggleLoader(document.getElementById("report-group"))}},this.state.appointment.report?"Replace Report":"Upload Report"),l.a.createElement("div",{className:"hidden-button",id:"report-group"},l.a.createElement("input",{type:"file",name:"report",className:"form-control"}),l.a.createElement("button",{className:"button",onClick:function(){return e.loadReport(document.getElementById("report-group"))}},"Submit")))))}}]),a}(n.Component),J=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("footer",null,l.a.createElement("h4",null,l.a.createElement("strong",null,"Take care of your health!"))))}}]),a}(n.Component),K=(a(104),a(105),a(13)),Q=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"added-med"},l.a.createElement("p",null,l.a.createElement("strong",null,"Medication: "),this.props.medication.name),l.a.createElement("p",null,l.a.createElement("strong",null,"Dose per take: "),this.props.medication.dosePerTake),l.a.createElement("p",null,l.a.createElement("strong",null,"Takes per day: "),this.props.medication.takesPerDay),l.a.createElement("p",null,l.a.createElement("strong",null,"Days per take: "),this.props.medication.daysPerTake),l.a.createElement("p",null,l.a.createElement("strong",null,"Start date: "),this.props.medication.startDate),l.a.createElement("p",null,l.a.createElement("strong",null,"End date: "),this.props.medication.endDate),l.a.createElement("p",null,l.a.createElement("strong",null,"Comments: "),this.props.medication.comments),l.a.createElement("button",{className:"button",onClick:function(){return e.props.onDelete(e.props.id)}},"Delete")))}}]),a}(n.Component),V=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{className:"prescription-form",onSubmit:this.props.onCommit},l.a.createElement("small",null,"Please fill in all the fields"),l.a.createElement("div",{className:"presription-inputs"},l.a.createElement("label",null,"Medication name "),l.a.createElement("input",{name:"name",id:"name",type:"text"})),l.a.createElement("div",{className:"presription-inputs"},l.a.createElement("label",null,"Dose per take "),l.a.createElement("input",{name:"dosePerTake",id:"dosePerTake",type:"text",placeholder:"ex: 2 pills"})),l.a.createElement("div",{className:"presription-inputs"},l.a.createElement("label",null,"Takes per day "),l.a.createElement("input",{name:"takesPerDay",id:"takesPerDay",type:"number",min:"0"})),l.a.createElement("div",{className:"presription-inputs"},l.a.createElement("label",null,"Days per take "),l.a.createElement("input",{name:"daysPerTake",id:"daysPerTake",type:"number",min:"0"}),l.a.createElement("small",null,"If the patient needs to take the medication every day, write 1. If once every two days, write 2 and so on.")),l.a.createElement("div",{className:"presription-inputs"},l.a.createElement("label",null,"Start date "),l.a.createElement("input",{name:"startDate",id:"startDate",min:Date.now().toLocaleString(),type:"date",placeholder:"When should the patient start the treatment?"})),l.a.createElement("div",{className:"presription-inputs"},l.a.createElement("label",null,"End date "),l.a.createElement("input",{name:"endDate",id:"endDate",type:"date",placeholder:"When should the patient stop the treatment?"})),l.a.createElement("div",{className:"presription-inputs"},l.a.createElement("label",null,"Comments "),l.a.createElement("textarea",{name:"comments",id:"comments",type:"text",placeholder:"Additional comment",rows:"3",cols:"30"})),l.a.createElement("button",{className:"add-med-btn",type:"submit"},l.a.createElement("img",{src:"/images/btn-add.png",alt:"btn"}))))}}]),a}(n.Component),G=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={prescription:{medications:[]},showCreate:!1,showSubmit:!1},e.handleSubmit=function(t){t.preventDefault();var a=t.currentTarget,n=a.name,l=a.dosePerTake,r=a.startDate,i=a.endDate,s=a.takesPerDay,o=a.daysPerTake,c=a.comments,m={name:n.value,dosePerTake:l.value,startDate:r.value,endDate:i.value,takesPerDay:s.value,daysPerTake:o.value,comments:c.value};if(D()(r.value).isBefore(D()(Date.now()))||s<=0||o<=0)e.setState({showSubmit:!0});else{var d=JSON.parse(JSON.stringify(e.state.prescription));d.medications.push(m),e.setState({prescription:d});var p,u=t.currentTarget.getElementsByTagName("INPUT"),g=t.currentTarget.getElementsByTagName("TEXTAREA")[0],h=Object(C.a)(u);try{for(h.s();!(p=h.n()).done;){p.value.value=""}}catch(E){h.e(E)}finally{h.f()}g.value=""}},e.handleDelete=function(t){var a=e.state.prescription.medications.filter((function(e,a){return a!==t}));e.setState({prescription:{medications:a}})},e.handleCreate=function(){b.a.post("".concat(E,"/create-prescription/").concat(e.props.match.params.appointmentId),{medications:e.state.prescription.medications},{withCredentials:!0}).then((function(t){e.props.history.push("/calendar/".concat(e.props.match.params.appointmentId))})).catch((function(t){e.setState({showCreate:!0})}))},e.handleClose=function(){e.setState({showCreate:!1,showSubmit:!1})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Prescription Form"),l.a.createElement("div",{className:"main-content prescrition-form-card"},l.a.createElement(V,{onCommit:this.handleSubmit}),l.a.createElement("button",{className:"button save-pres-btn",onClick:this.handleCreate},"Save prescription"),l.a.createElement("div",{className:"medications-added-card"},this.state.prescription.medications?this.state.prescription.medications.map((function(t,a){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Q,{key:a,id:a,medication:t,onDelete:e.handleDelete})," ",l.a.createElement("hr",null))})):null),l.a.createElement("p",null,this.state.errorMsg),l.a.createElement(x.a,{show:this.state.showCreate,onHide:this.handleClose},l.a.createElement(x.a.Body,null,"All fields except for the comments are mandatory."),l.a.createElement(x.a.Footer,null,l.a.createElement(A.a,{variant:"primary",onClick:this.handleClose},"In understood"))),l.a.createElement(x.a,{show:this.state.showSubmit,onHide:this.handleClose},l.a.createElement(x.a.Body,null,"Impossible parameters. Please double check the prescription"),l.a.createElement(x.a.Footer,null,l.a.createElement(A.a,{variant:"primary",onClick:this.handleClose},"In understood")))))}}]),a}(n.Component),z=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={loggedInUser:null,usertype:null,errorMsg:"",desiredUrl:null,passwordStrength:""},e.handleSignUp=function(t){t.preventDefault();var a=t.currentTarget,n=a.email,l=a.password,r=a.usertype,i=a.username;b.a.post("".concat(E,"/auth/signup"),{username:i.value,email:n.value,password:l.value,usertype:r.value}).then((function(t){e.setState({errorMsg:""},(function(){return e.props.history.push("/login")}))})).catch((function(t){e.setState({errorMsg:t.response.data.errorMessage})}))},e.handleLogIn=function(t){t.preventDefault();var a=t.currentTarget,n=a.email,l=a.password,r=a.usertype;b.a.post("".concat(E,"/auth/login"),{email:n.value,password:l.value,usertype:r.value},{withCredentials:!0}).then((function(t){e.setState({loggedInUser:t.data,usertype:r.value,errorMsg:null},(function(){"patient"===e.state.usertype?window.location.pathname.includes("doctor")?e.props.history.push(window.location.pathname):window.location.pathname.includes("doctor")||e.props.history.push("/profile"):"doctor"===e.state.usertype&&e.props.history.push("/doctor/".concat(e.state.loggedInUser._id))}))})).catch((function(t){e.setState({errorMsg:t.response.data.error})}))},e.handleLogOut=function(t){b.a.post("".concat(E,"/auth/logout"),{},{withCredentials:!0}).then((function(){e.setState({loggedInUser:null,usertype:null,desiredUrl:null},(function(){e.props.history.push("/")}))}))},e.handlePass=function(t){var a=0,n=new RegExp(/^(?=.*[a-z])/),l=new RegExp(/(?=.*[A-Z])/),r=new RegExp(/(?=.*[0-9])/),i=new RegExp(/(?=.*[!@#$%^&*])/),s=new RegExp(/(?=.{8,})/),o=t.currentTarget.value;n.test(o)&&a++,l.test(o)&&a++,r.test(o)&&a++,i.test(o)&&a++,s.test(o)&&a++,0===a&&e.setState({passwordStrength:""}),a<3&&a>0&&e.setState({passwordStrength:"Your password is too weak."}),a<5&&a>=3&&e.setState({passwordStrength:"Almost there, you just need to increase your password strength a little more."}),a>=5&&e.setState({passwordStrength:"Your password is good to go!"}),""===t.currentTarget.value&&e.setState({errorMsg:""})},e.clearError=function(t){""===t.currentTarget.value&&e.setState({errorMsg:""})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.state.loggedInUser||b.a.get("".concat(E,"/user"),{withCredentials:!0}).then((function(t){e.setState({loggedInUser:t.data.loggedInUser,usertype:t.data.usertype})}))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"body"},l.a.createElement(g,{loggedInUser:this.state.loggedInUser,usertype:this.state.usertype,onLogout:this.handleLogOut}),l.a.createElement(K.c,null,l.a.createElement(K.a,{exact:!0,path:"/",render:function(){return l.a.createElement(y,{doctorList1:e.state.doctorList})}}),this.state.loggedInUser?null:l.a.createElement(l.a.Fragment,null,l.a.createElement(K.a,{path:"/login",render:function(){return l.a.createElement(N,{errorMsg:e.state.errorMsg,onClear:e.clearError,onLogIn:e.handleLogIn})}}),l.a.createElement(K.a,{path:"/signup",render:function(){return l.a.createElement(v,{onPass:e.handlePass,passwordStrength:e.state.passwordStrength,onClear:e.clearError,errorMsg:e.state.errorMsg,onSignUp:e.handleSignUp})}}),l.a.createElement(K.a,{path:"/doctor/:doctorId",render:function(t){return l.a.createElement(N,{onClear:e.clearError,errorMsg:e.state.errorMsg,onLogIn:e.handleLogIn})}})),"doctor"===this.state.usertype?l.a.createElement(l.a.Fragment,null,l.a.createElement(K.a,{exact:!0,path:"/calendar",render:function(t){return l.a.createElement(R,Object.assign({loggedInUser:e.state.loggedInUser,usertype:e.state.usertype},t))}}),l.a.createElement(K.a,{path:"/calendar/:appointmentId",render:function(t){return l.a.createElement(W,Object.assign({loggedInUser:e.state.loggedInUser,usertype:e.state.usertype},t))}}),l.a.createElement(K.a,{path:"/doctor/:doctorId",render:function(t){return l.a.createElement(_,Object.assign({loggedInUser:e.state.loggedInUser,usertype:e.state.usertype},t))}}),l.a.createElement(K.a,{path:"/create-prescription/:appointmentId",render:function(t){return l.a.createElement(G,Object.assign({loggedInUser:e.state.loggedInUser,usertype:e.state.usertype},t))}})):null,"patient"===this.state.usertype?l.a.createElement(l.a.Fragment,null,l.a.createElement(K.a,{path:"/profile",render:function(t){return l.a.createElement(w,Object.assign({loggedInUser:e.state.loggedInUser,usertype:e.state.usertype},t))}}),l.a.createElement(K.a,{path:"/appointments",render:function(t){return l.a.createElement(T,Object.assign({loggedInUser:e.state.loggedInUser,usertype:e.state.usertype},t))}}),l.a.createElement(K.a,{path:"/medication-planner",render:function(t){return l.a.createElement(S,Object.assign({loggedInUser:e.state.loggedInUser,usertype:e.state.usertype},t))}}),l.a.createElement(K.a,{path:"/doctor/:doctorId",render:function(t){return l.a.createElement(_,Object.assign({loggedInUser:e.state.loggedInUser,usertype:e.state.usertype},t))}})):null),l.a.createElement(J,null))}}]),a}(l.a.Component),$=Object(K.f)(z);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(d.a,null,l.a.createElement(l.a.StrictMode,null,l.a.createElement($,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},70:function(e,t,a){e.exports=a(106)},75:function(e,t,a){}},[[70,1,2]]]);
//# sourceMappingURL=main.c2b39906.chunk.js.map