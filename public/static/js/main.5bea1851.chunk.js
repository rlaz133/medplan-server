(this.webpackJsonpmedplan=this.webpackJsonpmedplan||[]).push([[0],{110:function(e,t,a){},111:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(21),i=a.n(r),o=(a(64),a(5)),s=a(6),c=a(8),m=a(7),d=a(10),p=a(114),u=a(115),g=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"navbar-all"},l.a.createElement("div",{className:"navbar-logo"},l.a.createElement(d.b,{to:"/"},l.a.createElement("img",{src:"../images/logo-transparent.png",alt:"logo",className:"header-logo"}))),l.a.createElement("div",{className:"navbar-menu"},"patient"===this.props.usertype?l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{expand:"lg"},l.a.createElement(p.a.Toggle,{"aria-controls":"basic-navbar-nav"}),l.a.createElement(p.a.Collapse,{id:"basic-navbar-nav"},l.a.createElement(u.a,{variant:"tabs",className:"mr-auto"},l.a.createElement(u.a.Item,{className:"nav-item"},l.a.createElement(d.b,{to:"/"},l.a.createElement(u.a.Link,{className:"nav-link",href:"/"},"Search doctor"))),l.a.createElement(u.a.Item,{className:"nav-item"},l.a.createElement(d.b,{to:"/profile"},l.a.createElement(u.a.Link,{className:"nav-link",href:"/profile"},"Profile"))),l.a.createElement(u.a.Item,{className:"nav-item"},l.a.createElement(d.b,{to:"/appointments"},l.a.createElement(u.a.Link,{className:"nav-link",href:"/appointments"},"Appointments"))),l.a.createElement(u.a.Item,{className:"nav-item"},l.a.createElement(d.b,{to:"/medication-planner"},l.a.createElement(u.a.Link,{className:"nav-link",href:"/medication-planner"},"Planner"))),l.a.createElement(u.a.Item,{className:"nav-item"},l.a.createElement(u.a.Link,{onClick:this.props.onLogout},"Log Out")))))):null,"doctor"===this.props.usertype?l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{expand:"lg"},l.a.createElement(p.a.Toggle,{"aria-controls":"basic-navbar-nav"}),l.a.createElement(p.a.Collapse,{id:"basic-navbar-nav"},l.a.createElement(u.a,{variant:"tabs",className:"mr-auto"},l.a.createElement(u.a.Item,{className:"nav-item"},l.a.createElement(d.b,{to:"/calendar"},l.a.createElement(u.a.Link,{className:"nav-link",href:"/calendar"},"Calendar"))),l.a.createElement(u.a.Item,{className:"nav-item"},l.a.createElement(d.b,{to:"/doctor/".concat(this.props.loggedInUser._id)},l.a.createElement(u.a.Link,{className:"nav-link",href:"/doctor/".concat(this.props.loggedInUser._id)},"Profile"))),l.a.createElement(u.a.Item,{className:"nav-item"},l.a.createElement(u.a.Link,{onClick:this.props.onLogout},"LOG OUT")))))):null,this.props.loggedInUser?null:l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{expand:"lg"},l.a.createElement(p.a.Toggle,{"aria-controls":"basic-navbar-nav"}),l.a.createElement(p.a.Collapse,{id:"basic-navbar-nav"},l.a.createElement(u.a,{variant:"tabs",className:"mr-auto"},l.a.createElement(u.a.Item,{className:"nav-item"},l.a.createElement(d.b,{to:"/signup"},l.a.createElement(u.a.Link,{className:"nav-link",href:"/signup"},"SIGN UP"))),l.a.createElement(u.a.Item,{className:"nav-item"},l.a.createElement(d.b,{to:"/login"},l.a.createElement(u.a.Link,{className:"nav-link",href:"/login"},"LOG IN")))))))))}}]),a}(n.Component),h=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"main-content"},this.props.doctorList.map((function(e){return l.a.createElement("div",{className:"home-doctor-card"},l.a.createElement("img",{className:"doc-img",src:e.picture,alt:"profile picture"}),l.a.createElement("div",{className:"search-doc-details-text"},l.a.createElement("p",null,l.a.createElement("strong",null,e.username)),l.a.createElement("p",null,e.speciality),l.a.createElement("p",null,l.a.createElement("em",null,e.city)),l.a.createElement("p",null,"From ",e.openingTime," to ",e.closingTime)),l.a.createElement(d.b,{to:"/doctor/".concat(e._id)},l.a.createElement("button",{className:"button"},"Book an appointment")))})),l.a.createElement("script",{async:!0,defer:!0,src:"https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap",type:"text/javascript"}))}}]),a}(n.Component),f=(a(72),a(28)),E=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={mapPlaces:[{lat:52.370292,lng:4.897403},{lat:52.370282,lng:4.897503}]},e}return Object(s.a)(a,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"map-card"},l.a.createElement(f.Map,{google:this.props.google,zoom:10,style:{width:"350px",height:"200px"},initialCenter:{lat:52.372471,lng:4.890983}},l.a.createElement(f.Marker,{position:{lat:52.361236,lng:4.880148}}))))}}]),a}(n.Component),b=(Object(f.GoogleApiWrapper)({})(E),"http://localhost:5000/api"),y=a(9),v=a.n(y),N=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={doctors:[],filteredDoctors:[],specialityQuery:"",cityQuery:""},e.handleChange=function(t){var a=t.currentTarget.name,n=t.currentTarget.value;"city"===a?e.setState({cityQuery:n},(function(){return e.handleSearch()})):e.setState({specialityQuery:n},(function(){return e.handleSearch()}))},e.handleSearch=function(t){console.log("state in handle search",e.state.cityQuery),console.log("state in handle search",e.state.specialityQuery);var a=e.state.doctors.filter((function(t){return!(!t.speciality||!t.city)&&(console.log("inside the map",t.speciality),t.speciality.toLowerCase().includes(e.state.specialityQuery.toLowerCase())&&t.city.toLowerCase().includes(e.state.cityQuery.toLowerCase()))}));e.setState({filteredDoctors:a})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;v.a.get("".concat(b,"/doctor/search")).then((function(t){e.setState({doctors:t.data,filteredDoctors:t.data})}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"index-info-card"},l.a.createElement("div",{className:"index-img-card"},l.a.createElement("img",{src:"/images/doctors.png",alt:"img"}),l.a.createElement("p",null,"Thousands of doctors available on the platform.")),l.a.createElement("div",{className:"index-img-card"},l.a.createElement("img",{src:"/images/online-booking.png",alt:"img"}),l.a.createElement("p",null,"Easy online booking without struggle and 24/7!")),l.a.createElement("div",{className:"index-img-card"},l.a.createElement("img",{src:"/images/prescription.png",alt:"img"}),l.a.createElement("p",null,"Direct access to your prescriptions."))),l.a.createElement("div",{className:"home-search-bar"},l.a.createElement("input",{className:"input-search",onChange:this.handleChange,name:"speciality",type:"text",placeholder:"Search by speciality"}),l.a.createElement("input",{className:"input-search",onChange:this.handleChange,name:"city",type:"text",placeholder:"Search by city"})),l.a.createElement(h,{doctorList:this.state.filteredDoctors}))}}]),a}(n.Component),C=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={passwordStrength:"",displayError:!0},e}return Object(s.a)(a,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Sign Up"),l.a.createElement("form",{onSubmit:this.props.onSignUp,className:"main-content sign-log-form"},l.a.createElement("div",{className:"user-type-choice"},l.a.createElement("label",{className:"label-user",htmlfor:"usertype"},"I am a "),l.a.createElement("select",{className:"button",name:"usertype"},l.a.createElement("option",{className:"user-type-choice",value:"patient"},"Patient"),l.a.createElement("option",{className:"user-type-choice",value:"doctor"},"Doctor"))),l.a.createElement("label",{className:"login-label"},"Full name"),l.a.createElement("input",{onChange:this.props.onClear,name:"username",type:"text"}),l.a.createElement("label",{className:"login-label"},"Email"),l.a.createElement("input",{onChange:this.props.onClear,name:"email",type:"email"}),l.a.createElement("label",{className:"login-label"},"Password"),l.a.createElement("em",null,l.a.createElement("small",null,"Password needs to be at least 8 characters, and include both lower and upper cases, numbers and special signs.")),l.a.createElement("input",{onChange:this.props.onPass,name:"password",type:"password"}),l.a.createElement("small",null,this.props.passwordStrength),l.a.createElement("div",{className:"sign-log-btn-line"},l.a.createElement("button",{className:"button",type:"submit"},"Submit"),l.a.createElement(d.b,{to:"/login"},l.a.createElement("button",{className:"button"},"Or Log In!")))),l.a.createElement("p",null,this.props.errorMsg))}}]),a}(n.Component),I=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Log In"),l.a.createElement("form",{onSubmit:this.props.onLogIn,className:"main-content sign-log-form"},l.a.createElement("div",{className:"user-type-choice"},l.a.createElement("label",{className:"label-user",for:"usertype"},"I am a "),l.a.createElement("select",{className:"button",name:"usertype"},l.a.createElement("option",{className:"user-type-choice",value:"patient"},"Patient"),l.a.createElement("option",{className:"user-type-choice",value:"doctor"},"Doctor"))),l.a.createElement("label",{className:"login-label"},"Email"),l.a.createElement("input",{onChange:this.props.onClear,name:"email",type:"email"}),l.a.createElement("label",{className:"login-label"},"Password"),l.a.createElement("input",{onChange:this.props.onClear,name:"password",type:"password"}),l.a.createElement("div",{className:"sign-log-btn-line"},l.a.createElement("button",{className:"button",type:"submit"},"Submit"),l.a.createElement(d.b,{to:"/signup"},l.a.createElement("button",{className:"button"},"Or Sign Up!")))),l.a.createElement("p",null,this.props.errorMsg))}}]),a}(n.Component),k=a(22),O=a(19),w=a(16),T=a(3),D=a.n(T),j=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={patient:{},updatedField:{},editing:!1,unedited:""},e.handleChange=function(t){var a=t.currentTarget,n=a.name,l=a.value;e.setState({updatedField:Object(w.a)({},n,l),patient:Object(O.a)(Object(O.a)({},e.state.patient),{},Object(w.a)({},n,l))})},e.handleEnable=function(t){if(!e.state.editing){var a=t.getElementsByTagName("BUTTON");t.getElementsByTagName("INPUT")[0].readOnly=!1,t.getElementsByTagName("INPUT")[0].classList.toggle("readonly-field");var n,l=t.getElementsByTagName("INPUT")[0].value,r=Object(k.a)(a);try{for(r.s();!(n=r.n()).done;){n.value.classList.toggle("hidden-button")}}catch(i){r.e(i)}finally{r.f()}e.setState({editing:!e.state.editing,unedited:l})}},e.handleDisable=function(t){var a,n=t.getElementsByTagName("BUTTON");t.getElementsByTagName("INPUT")[0].readOnly=!0,t.getElementsByTagName("INPUT")[0].classList.toggle("readonly-field");var l,r=t.getElementsByTagName("INPUT")[0].name,i=Object(k.a)(n);try{for(i.s();!(l=i.n()).done;){l.value.classList.toggle("hidden-button")}}catch(o){i.e(o)}finally{i.f()}e.setState({editing:!e.state.editing,patient:Object(O.a)(Object(O.a)({},e.state.patient),{},(a={},Object(w.a)(a,r,e.state.unedited),Object(w.a)(a,"updatedField",{}),a))})},e.handleEdit=function(t,a){var n=Object.keys(t)[0],l=Object.values(t)[0];v.a.patch("".concat(b,"/patient/").concat(e.props.loggedInUser._id),Object(w.a)({},n,l),{withCredentials:!0});var r=a.getElementsByTagName("BUTTON");a.getElementsByTagName("INPUT")[0].classList.toggle("readonly-field");var i,o=Object(k.a)(r);try{for(o.s();!(i=o.n()).done;){i.value.classList.toggle("hidden-button")}}catch(s){o.e(s)}finally{o.f()}e.setState({editing:!e.state.editing}),console.log(e.state.patient)},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;v.a.get("".concat(b,"/planner"),{withCredentials:!0}).then((function(t){e.setState({patient:t.data})}))}},{key:"render",value:function(){var e=this;if(!this.props.loggedInUser)return l.a.createElement(I,null);if(!this.state.patient)return l.a.createElement("img",{src:"../images/loader.gif",alt:"loader"});var t=this.state.patient,a=t.username,n=t.birthDate,r=t.height,i=t.weight,o=t.allergies,s=t.history,c=t.phoneNumber,m=t.address,d=t.email;return console.log(n),l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Profile"),l.a.createElement("div",{className:"main-content profile-page-content"},l.a.createElement("div",{className:"profile-field",id:"name-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"Full Name")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"username",type:"text",value:a,onChange:this.handleChange}),l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("name-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("name-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("name-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))),l.a.createElement("div",{className:"profile-field",id:"birthDate-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"Birth Date")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"birthDate",type:"text",value:n,onChange:this.handleChange}),l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("birthDate-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("birthDate-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("birthDate-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))),l.a.createElement("div",{className:"profile-field",id:"address-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"Address")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"address",type:"text",value:m,onChange:this.handleChange}),l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("address-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("address-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("address-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))),l.a.createElement("div",{className:"profile-field",id:"email-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"E-Mail")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"email",type:"email",value:d,onChange:this.handleChange}),l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("email-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("email-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("email-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))),l.a.createElement("div",{className:"profile-field",id:"phoneNumber-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"Telephone")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"phoneNumber",type:"text",value:c,onChange:this.handleChange}),l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("phoneNumber-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("phoneNumber-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("phoneNumber-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))),l.a.createElement("div",{className:"profile-field",id:"height-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"Height (cm)")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"height",type:"text",value:r,onChange:this.handleChange}),l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("height-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("height-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("height-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))),l.a.createElement("div",{className:"profile-field",id:"weight-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"Weight (kg)")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"weight",type:"text",value:i,onChange:this.handleChange}),l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("weight-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("weight-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("weight-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))),l.a.createElement("div",{className:"profile-field",id:"allergies-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"Allergies")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"allergies",type:"text",value:o,onChange:this.handleChange}),l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("allergies-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("allergies-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("allergies-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))),l.a.createElement("div",{className:"profile-field",id:"history-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"Medical History")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"history",type:"text",value:s,onChange:this.handleChange}),l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("history-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("history-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("history-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"})))))}}]),a}(n.Component),B=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={loggedInUser:e.props.loggedInUser,usertype:e.props.usertype,appointments:null,report:null},e.handleDownload=function(t,a){t.preventDefault(),v.a.get("".concat(b,"/patient/appointment/report/").concat(a),{withCredentials:!0}).then((function(t){console.log(t.data.report),e.setState({report:t.data.report}),window.open(e.state.report,"_blank")}))},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;v.a.get("".concat(b,"/patient/appointments"),{withCredentials:!0}).then((function(t){var a=JSON.parse(JSON.stringify(t.data));a.sort((function(e,t){return D()(t.time)-D()(e.time)})),console.log(a),e.setState({appointments:a},(function(){return console.log(e.state.appointments)}))}))}},{key:"render",value:function(){var e=this;return this.state.appointments?l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Appointments"),this.state.appointments.map((function(t){var a,n=D()(t.time).local().format("Do MMM YYYY"),r=D()(t.time).local().format("HH:mm");return a=t.time>Date.now()?D()(t.time).local().toNow():D()(t.time).local().fromNow(),l.a.createElement("div",{className:"main-content"},l.a.createElement("div",{className:"appointment-card"},l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement("strong",null,"On: ",n," at ",r,", ",a)),l.a.createElement("p",null,"With ",l.a.createElement("strong",null,"Dr. ",t.doctor.username)),l.a.createElement("p",null,l.a.createElement("strong",null,"Specialized in: "),t.doctor.speciality),l.a.createElement("p",null,l.a.createElement("strong",null,"Purpose: "),t.reason),l.a.createElement("p",null,l.a.createElement("strong",null,"Located at: "),t.doctor.address)),t.time>Date.now()?l.a.createElement(d.b,{to:"/doctor/".concat(t.doctor._id)},l.a.createElement("button",{className:"button"},"Cancel")):t.report?l.a.createElement("button",{className:"button",onClick:function(a){return e.handleDownload(a,t._id)}},"See Report"):l.a.createElement("button",{className:"button disabled",disabled:!0},"No Report")))}))):l.a.createElement("img",{src:"../images/loader.gif",alt:"loader"})}}]),a}(n.Component),S=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={patient:{},currentday:D()(Date.now())},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;v.a.get("".concat(b,"/planner"),{withCredentials:!0}).then((function(t){e.setState({patient:t.data},(function(){console.log(e.state.patient);var t=e.state.patient.prescriptions.map((function(e){return e.medications})).flat().filter((function(t){return D()(e.state.currentday).isBefore(t.endDate)&&D()(t.startDate).isBefore(e.state.currentday)&&e.state.currentday.diff(D()(t.startDate),"days")%t.daysPerTake===0}));e.setState({currentmeds:t},(function(){return console.log(e.state)}))}))}))}},{key:"previousDay",value:function(){var e=this;this.setState({currentday:this.state.currentday.subtract(1,"day")},console.log(this.state.currentday.toString()));var t=this.state.patient.prescriptions.map((function(e){return e.medications})).flat().filter((function(t){return D()(e.state.currentday).isBefore(t.endDate)&&D()(t.startDate).isBefore(e.state.currentday)&&e.state.currentday.diff(D()(t.startDate),"days")%t.daysPerTake===0}));this.setState({currentmeds:t},(function(){return console.log(e.state)}))}},{key:"nextDay",value:function(){var e=this;this.setState({currentday:this.state.currentday.add(1,"day")},console.log(this.state.currentday.toString()));var t=this.state.patient.prescriptions.map((function(e){return e.medications})).flat().filter((function(t){return D()(e.state.currentday).isBefore(t.endDate)&&D()(t.startDate).isBefore(e.state.currentday)&&e.state.currentday.diff(D()(t.startDate),"days")%t.daysPerTake===0}));this.setState({currentmeds:t},(function(){return console.log(e.state)}))}},{key:"render",value:function(){var e=this;return this.state.currentmeds?l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,"Medication Planner"),l.a.createElement("div",{className:"patient-cal-date-field"},l.a.createElement("button",{className:"button calendar-day",onClick:function(){return e.previousDay()}},"<"),l.a.createElement("h4",null,this.state.currentday.format("Do MMM, YYYY").toString()),l.a.createElement("button",{className:"button calendar-day",onClick:function(){return e.nextDay()}},">")),l.a.createElement("div",{className:"main-content patient-cal-day-times"},l.a.createElement("h4",{className:"time-planner"},"Morning"),this.state.currentmeds.map((function(e){if(3===e.takesPerDay||2===e.takesPerDay)return l.a.createElement("div",null,l.a.createElement("p",null,e.name," -  ",e.dosePerTake," - Note: ",e.comments))})),l.a.createElement("hr",null),l.a.createElement("h4",{className:"time-planner"},"Noon"),this.state.currentmeds.map((function(e){if(3===e.takesPerDay||1===e.takesPerDay)return l.a.createElement("div",null,l.a.createElement("p",null,e.name," -  ",e.dosePerTake," - Note: ",e.comments))})),l.a.createElement("hr",null),l.a.createElement("h4",{className:"time-planner"},"Night"),this.state.currentmeds.map((function(e){if(3===e.takesPerDay||2===e.takesPerDay)return l.a.createElement("div",null,l.a.createElement("p",null,e.name," -  ",e.dosePerTake," - Note: ",e.comments))})))):l.a.createElement("img",{src:"../images/loader.gif",alt:"loader"})}}]),a}(n.Component),U=a(32),P=a(27),F=a(33),M=a(34),x=0;function L(){return String(x++)}var A=a(30),_=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={doctor:{},weekendsVisible:!1,currentEvents:[],updatedField:{},editing:!1,unedited:"",appointments:[],events:[]},e.handleChange=function(t){var a=t.currentTarget,n=a.name,l=a.value;e.setState({updatedField:Object(w.a)({},n,l),doctor:Object(O.a)(Object(O.a)({},e.state.doctor),{},Object(w.a)({},n,l))})},e.handleEnable=function(t){if(!e.state.editing){var a=t.getElementsByTagName("BUTTON");t.getElementsByTagName("INPUT")[0].readOnly=!1,t.getElementsByTagName("INPUT")[0].classList.toggle("readonly-field");var n,l=t.getElementsByTagName("INPUT")[0].value,r=Object(k.a)(a);try{for(r.s();!(n=r.n()).done;){n.value.classList.toggle("hidden-button")}}catch(i){r.e(i)}finally{r.f()}e.setState({editing:!e.state.editing,unedited:l})}},e.handleDisable=function(t){var a,n=t.getElementsByTagName("BUTTON");t.getElementsByTagName("INPUT")[0].readOnly=!0,t.getElementsByTagName("INPUT")[0].classList.toggle("readonly-field");var l,r=t.getElementsByTagName("INPUT")[0].name,i=Object(k.a)(n);try{for(i.s();!(l=i.n()).done;){l.value.classList.toggle("hidden-button")}}catch(o){i.e(o)}finally{i.f()}e.setState({editing:!e.state.editing,doctor:Object(O.a)(Object(O.a)({},e.state.doctor),{},(a={},Object(w.a)(a,r,e.state.unedited),Object(w.a)(a,"updatedField",{}),a))})},e.handleEdit=function(t,a){var n=Object.keys(t)[0],l=Object.values(t)[0];v.a.patch("".concat(b,"/doctor/").concat(e.props.match.params.doctorId),Object(w.a)({},n,l),{withCredentials:!0});var r=a.getElementsByTagName("BUTTON");a.getElementsByTagName("INPUT")[0].classList.toggle("readonly-field");var i,o=Object(k.a)(r);try{for(o.s();!(i=o.n()).done;){i.value.classList.toggle("hidden-button")}}catch(s){o.e(s)}finally{o.f()}e.setState({editing:!e.state.editing})},e.handleImgEnable=function(t){t.getElementsByTagName("INPUT")[0].classList.toggle("hidden-button"),t.getElementsByTagName("BUTTON")[1].classList.toggle("hidden-button"),e.setState({editing:!e.state.editing})},e.handleImgEdit=function(t){if(t){var a,n=t.getElementsByTagName("INPUT")[0].files[0],l=new FormData;l.append("imageUrl",n),t.getElementsByTagName("INPUT")[0].classList.toggle("hidden-button"),t.getElementsByTagName("BUTTON")[1].classList.toggle("hidden-button"),v.a.post("".concat(b,"/upload"),l).then((function(t){a=t.data.image,v.a.patch("".concat(b,"/doctor/").concat(e.props.match.params.doctorId),{picture:t.data.image},{withCredentials:!0})})).then((function(t){console.log(t),e.setState({doctor:Object(O.a)(Object(O.a)({},e.state.doctor),{},{picture:a})})}))}},e.handleDateSelect=function(t){if(D()(new Date(t.startStr)).isBefore(Date.now()))t.view.calendar.unselect(),alert("Please, select a valid date");else{var a=t.view.calendar;if(a.unselect(),t.end-t.start>18e5)return void alert("Appointments must have a duration of half an hour");var n=prompt("Please enter the reason for the appointment: ");n&&a.addEvent({id:L(),title:n,start:t.startStr,end:t.endStr,patient:e.props.loggedInUser._id,startEditable:!0,editable:!1})}},e.handleEventClick=function(t){console.log(t.event.startStr),t.event.extendedProps.patient._id!==e.props.loggedInUser._id&&t.event.extendedProps.patient!==e.props.loggedInUser._id||!D()(t.event.startStr).isAfter(D()(Date.now()))||window.confirm("Are you sure you want to delete the event '".concat(t.event.title,"'"))&&t.event.remove()},e.handleEvents=function(t){e.setState({currentEvents:t})},e.appoCreate=function(t){console.log(t.event),v.a.post("".concat(b,"/patient/appointments/").concat(e.props.match.params.doctorId),{time:t.event.start,eventId:t.event.id,reason:t.event.title},{withCredentials:!0})},e.appoEdit=function(t){v.a.patch("".concat(b,"/patient/appointments/").concat(e.props.match.params.doctorId),{time:t.event.start,eventId:t.event.id,reason:t.event.title},{withCredentials:!0})},e.appoCancel=function(t){console.log(t.event),v.a.delete("".concat(b,"/patient/appointments/").concat(e.props.match.params.doctorId,"/").concat(t.event.id),{withCredentials:!0})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;v.a.get("".concat(b,"/doctor/").concat(this.props.match.params.doctorId),{withCredentials:!0}).then((function(t){e.setState({doctor:t.data},(function(){console.log(e.state.doctor,new Date(e.state.doctor.openingTime))}))})),v.a.get("".concat(b,"/doctor/appointments/").concat(this.props.match.params.doctorId),{withCredentials:!0}).then((function(t){e.setState({appointments:t.data,events:t.data.map((function(t){console.log("ids:",t.patient,e.props.loggedInUser._id);var a=t.patient._id===e.props.loggedInUser._id?"#51B8F9":"gray",n=t.patient_id===e.props.loggedInUser._id;return{title:t.reason,start:t.time,id:t.eventId,startEditable:n,patient:t.patient,color:a}}))},(function(){console.log(e.state)}))}))}},{key:"render",value:function(){var e=this;if(!this.state.doctor)return l.a.createElement("img",{src:"../images/loader.gif",alt:"loader"});var t=this.state.doctor,a=t.username,n=t.speciality,r=t.city,i=t.address,o=t.email,s=t.phone,c=t.openingTime,m=t.closingTime,d=t.picture;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Doctor Profile"),l.a.createElement("div",{className:"main-content profile-page-content"},l.a.createElement("div",{className:"profile-field profile-field-img",id:"image-profile"},l.a.createElement("img",{src:d,alt:"",className:"doc-img"}),this.props.loggedInUser._id===this.props.match.params.doctorId?l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleImgEnable(document.getElementById("image-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("input",{autocomplete:"off",type:"file",className:"form-control hidden-button",name:"image",id:"image"}),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleImgEdit(document.getElementById("image-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))):null),l.a.createElement("div",{className:"profile-field",id:"name-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"Name")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"username",type:"text",value:a,onChange:this.handleChange}),this.props.loggedInUser._id===this.props.match.params.doctorId?l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("name-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("name-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("name-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))):null),l.a.createElement("div",{className:"profile-field",id:"speciality-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"Speciality")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"speciality",type:"text",value:n,onChange:this.handleChange}),this.props.loggedInUser._id===this.props.match.params.doctorId?l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("speciality-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("speciality-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("speciality-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))):null),l.a.createElement("div",{className:"profile-field",id:"city-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"City")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"city",type:"text",value:r,onChange:this.handleChange}),this.props.loggedInUser._id===this.props.match.params.doctorId?l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("city-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("city-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("city-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))):null),l.a.createElement("div",{className:"profile-field",id:"address-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"Address")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"address",type:"text",value:i,onChange:this.handleChange}),this.props.loggedInUser._id===this.props.match.params.doctorId?l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("address-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("address-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("address-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))):null),l.a.createElement("div",{className:"profile-field",id:"email-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"E-Mail")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"email",type:"email",value:o,onChange:this.handleChange}),this.props.loggedInUser._id===this.props.match.params.doctorId?l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("email-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("email-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("email-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))):null),l.a.createElement("div",{className:"profile-field",id:"phone-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"Telephone")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"phone",type:"text",value:s,onChange:this.handleChange}),this.props.loggedInUser._id===this.props.match.params.doctorId?l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("phone-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("phone-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("phone-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))):null),l.a.createElement("div",{className:"profile-field",id:"opening-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"Opening time")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"openingTime",type:"text",value:c,onChange:this.handleChange}),this.props.loggedInUser._id===this.props.match.params.doctorId?l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("opening-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("opening-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("opening-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))):null),l.a.createElement("div",{className:"profile-field",id:"closing-profile"},l.a.createElement("label",{className:"profile-label"},l.a.createElement("strong",null,"Closing time")),l.a.createElement("input",{autocomplete:"off",className:"readonly-field",readOnly:!0,name:"closingTime",type:"text",value:m,onChange:this.handleChange}),this.props.loggedInUser._id===this.props.match.params.doctorId?l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"edit-profile",onClick:function(){return e.handleEnable(document.getElementById("closing-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-edit.png",alt:"tbt"})),l.a.createElement("button",{className:"hidden-button edit-profile",onClick:function(){return e.handleDisable(document.getElementById("closing-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-delete.png",alt:"tbt"})),l.a.createElement("button",{type:"submit",className:"hidden-button edit-profile",onClick:function(){return e.handleEdit(e.state.updatedField,document.getElementById("closing-profile"))}},l.a.createElement("img",{className:"img-edit-btn-profile",src:"/images/btn-valid.png",alt:"tbt"}))):null),l.a.createElement("div",{className:"booking-card"},"patient"===this.props.usertype?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"booking-instr-card"},l.a.createElement("h4",null,"Booking Instructions"),l.a.createElement("ul",{className:"booking-instructions-text"},l.a.createElement("li",null,"Select the time slot by clicking on it"),l.a.createElement("li",null,"A pop-up appears, enter the purpose of the appointment"),l.a.createElement("li",null,'Click "ok" to valid the booking'),l.a.createElement("li",null,"You can:"),l.a.createElement("ul",null,l.a.createElement("li",null,"Modify the appointment time and date by dragging it to another available slot"),l.a.createElement("li",null,"Cancel the appointment, by clicking on it a pop will appear to confirm the cancellation")))),l.a.createElement("div",{className:"calendar-card"},l.a.createElement(U.a,{plugins:[P.b,F.a,M.a,A.a],headerToolbar:{left:"prev",center:"title",right:"next"},initialView:"timeGridWeek",titleFormat:"Do MMM YYYY",dayHeaderFormat:"DD/MM",selectable:!0,selectMirror:!1,dayMaxEvents:!0,allDaySlot:!1,eventStartEditable:!0,slotMinTime:"08:00",slotMaxTime:"20:00",businessHours:{daysOfWeek:[1,2,3,4,5],startTime:this.state.doctor.openingTime,endTime:this.state.doctor.closingTime},eventConstraint:{start:Date.now(),end:"2100-01-01",businessHours:{daysOfWeek:[1,2,3,4,5],startTime:this.state.doctor.openingTime,endTime:this.state.doctor.closingTime}},weekends:this.state.weekendsVisible,events:this.state.events,select:this.handleDateSelect,eventContent:Y,eventClick:this.handleEventClick,eventsSet:this.handleEvents,eventAdd:function(t){return e.appoCreate(t)},eventChange:function(t){return e.appoEdit(t)},eventRemove:function(t){return e.appoCancel(t)},defaultTimedEventDuration:"00:30"}))):null)))}}]),a}(n.Component);function Y(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("b",null,e.timeText))}var R=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={doctor:{},weekendsVisible:!1,currentEvents:[],updatedField:{},editing:!1,unedited:"",appointments:[],events:[]},e.handleEventClick=function(t){console.log(t),e.props.history.push("/calendar/".concat(t.event.extendedProps.appointment))},e.handleEvents=function(t){e.setState({currentEvents:t})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;v.a.get("".concat(b,"/doctor/").concat(this.props.loggedInUser._id),{withCredentials:!0}).then((function(t){e.setState({doctor:t.data},(function(){console.log(e.state.doctor,e.state.doctor.openingTime)}))})),v.a.get("".concat(b,"/doctor/appointments/").concat(this.props.loggedInUser._id),{withCredentials:!0}).then((function(t){e.setState({appointments:t.data,events:t.data.map((function(e){return{title:e.reason,start:e.time,id:e.eventId,editable:!1,patient:e.patient,appointment:e._id}}))})}))}},{key:"render",value:function(){return console.log(this.state.doctor.openingTime),l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Calendar"),l.a.createElement(U.a,{plugins:[P.b,F.a,M.a,A.a],headerToolbar:{left:"prev",center:"title",right:"next"},titleFormat:"DD/MM/YYYY",initialView:"timeGridDay",selectMirror:!0,dayMaxEvents:!0,allDaySlot:!1,eventDurationEditable:!1,slotMinTime:"08:00",slotMaxTime:"20:00",businessHours:{businessHours:{daysOfWeek:[1,2,3,4,5],startTime:"".concat(this.state.doctor.openingTime),endTime:this.state.doctor.closingTime}},weekends:this.state.weekendsVisible,events:this.state.events,eventContent:H,eventClick:this.handleEventClick,eventsSet:this.handleEvents,defaultTimedEventDuration:"00:30"}))}}]),a}(n.Component);function H(e){return console.log(e.event),l.a.createElement("div",{className:"event-content"},l.a.createElement("b",null,e.timeText),l.a.createElement("i",null,e.event.extendedProps.patient.username),l.a.createElement("i",null,e.event.title))}var W=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={},e.cancelAppointment=function(t){window.confirm("Are you sure you want to cancel the appointment?")&&v.a.delete("".concat(b,"/cancel/").concat(e.props.match.params.appointmentId),{withCredentials:!0}).then((function(){return e.props.history.push("/calendar")}))},e.toggleLoader=function(e){e.classList.toggle("hidden-button")},e.loadReport=function(t){var a=t.getElementsByTagName("INPUT")[0].files[0],n=new FormData;n.append("imageUrl",a),v.a.post("".concat(b,"/upload"),n).then((function(t){console.log(t.data),v.a.patch("".concat(b,"/append-report/").concat(e.props.match.params.appointmentId),{report:t.data.image},{withCredentials:!0})})).then((function(){e.toggleLoader(t),window.location.reload()}))},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;v.a.get("".concat(b,"/doctor/appointment/").concat(this.props.match.params.appointmentId),{withCredentials:!0}).then((function(t){return e.setState({appointment:t.data},(function(){return console.log(e.state.appointment)}))}))}},{key:"render",value:function(){var e=this;if(!this.state.appointment)return l.a.createElement("img",{src:"../images/loader.gif",alt:"loader"});var t,a=this.state.appointment.patient,n=a.username,r=a.phoneNumber,i=a.email,o=a.allergies,s=a.history,c=this.state.appointment,m=c.time,p=c.reason,u=D()(m).local().format("Do MMM YYYY"),g=D()(m).local().format("HH:mm");return t=m>Date.now()?D()(m).local().toNow():D()(m).local().fromNow(),l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null," Appointment Details"),l.a.createElement("div",{className:"main-content appointment-details-card"},l.a.createElement("div",{className:"top-card-app-details"},l.a.createElement("p",null,"On: ",u," at ",g,", ",t),l.a.createElement("p",null,"Reason: ",p)),l.a.createElement("div",{className:"bottom-card-app-details"},l.a.createElement("div",null,l.a.createElement("h3",null,"Patient information"),l.a.createElement("p",null,"Name: ",n),l.a.createElement("p",null,"Phone: ",r),l.a.createElement("p",null,"Email: ",i),l.a.createElement("p",null,"Allergies: ",o),l.a.createElement("p",null,"Medical History: ",s)),l.a.createElement("div",{className:"btn-app-details"},this.state.appointment.prescription?l.a.createElement("button",{disabled:!0,className:"button disabled"},"Prescription added"):l.a.createElement(d.b,{to:"/create-prescription/".concat(this.props.match.params.appointmentId)},l.a.createElement("button",{className:"button"},"Create Prescription")),D()(this.state.appointment.time)>D()(Date.now())?l.a.createElement("button",{className:"button",onClick:function(){return e.cancelAppointment(e.props.match.params.appointmentId)}},"Cancel appointment"):l.a.createElement("button",{disabled:!0,className:"button disabled",onClick:function(){return e.cancelAppointment(e.props.match.params.appointmentId)}},"Cancel appointment"))),l.a.createElement("div",{className:"report-upload"},l.a.createElement("button",{className:"button",onClick:function(){return e.toggleLoader(document.getElementById("report-group"))}},this.state.appointment.report?"Replace Report":"Upload Report"),l.a.createElement("div",{className:"hidden-button",id:"report-group"},l.a.createElement("input",{type:"file",name:"report",className:"form-control"}),l.a.createElement("button",{className:"button",onClick:function(){return e.loadReport(document.getElementById("report-group"))}},"Submit")))))}}]),a}(n.Component),Q=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("footer",null,l.a.createElement("h4",null,l.a.createElement("strong",null,"Take care of your health!"))))}}]),a}(n.Component),J=(a(109),a(110),a(11)),G=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"added-med"},l.a.createElement("p",null,l.a.createElement("strong",null,"Medication: "),this.props.medication.name),l.a.createElement("p",null,l.a.createElement("strong",null,"Dose per take: "),this.props.medication.dosePerTake),l.a.createElement("p",null,l.a.createElement("strong",null,"Takes per day: "),this.props.medication.takesPerDay),l.a.createElement("p",null,l.a.createElement("strong",null,"Days per take: "),this.props.medication.daysPerTake),l.a.createElement("p",null,l.a.createElement("strong",null,"Start date: "),this.props.medication.startDate),l.a.createElement("p",null,l.a.createElement("strong",null,"End date: "),this.props.medication.endDate),l.a.createElement("p",null,l.a.createElement("strong",null,"Comments: "),this.props.medication.comments),l.a.createElement("button",{className:"button",onClick:function(){return e.props.onDelete(e.props.id)}},"Delete")))}}]),a}(n.Component),V=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{className:"prescription-form",onSubmit:this.props.onCommit},l.a.createElement("small",null,"Please fill in all the fields"),l.a.createElement("div",{className:"presription-inputs"},l.a.createElement("label",null,"Medication name "),l.a.createElement("input",{name:"name",id:"name",type:"text"})),l.a.createElement("div",{className:"presription-inputs"},l.a.createElement("label",null,"Dose per take "),l.a.createElement("input",{name:"dosePerTake",id:"dosePerTake",type:"text",placeholder:"ex: 2 pills"})),l.a.createElement("div",{className:"presription-inputs"},l.a.createElement("label",null,"Takes per day "),l.a.createElement("input",{name:"takesPerDay",id:"takesPerDay",type:"number",min:"0"})),l.a.createElement("div",{className:"presription-inputs"},l.a.createElement("label",null,"Days per take "),l.a.createElement("input",{name:"daysPerTake",id:"daysPerTake",type:"number",min:"0"}),l.a.createElement("small",null,"If the patient needs to take the medication every day, write 1. If once every two days, write 2 and so on.")),l.a.createElement("div",{className:"presription-inputs"},l.a.createElement("label",null,"Start date "),l.a.createElement("input",{name:"startDate",id:"startDate",min:Date.now().toLocaleString(),type:"date",placeholder:"When should the patient start the treatment?"})),l.a.createElement("div",{className:"presription-inputs"},l.a.createElement("label",null,"End date "),l.a.createElement("input",{name:"endDate",id:"endDate",type:"date",placeholder:"When should the patient stop the treatment?"})),l.a.createElement("div",{className:"presription-inputs"},l.a.createElement("label",null,"Comments "),l.a.createElement("textarea",{name:"comments",id:"comments",type:"text",placeholder:"Additional comment",rows:"3",cols:"30"})),l.a.createElement("button",{className:"add-med-btn",type:"submit"},l.a.createElement("img",{src:"/images/btn-add.png",alt:"btn"}))))}}]),a}(n.Component),z=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={prescription:{medications:[]}},e.handleSubmit=function(t){t.preventDefault();var a=t.currentTarget,n=a.name,l=a.dosePerTake,r=a.startDate,i=a.endDate,o=a.takesPerDay,s=a.daysPerTake,c=a.comments,m={name:n.value,dosePerTake:l.value,startDate:r.value,endDate:i.value,takesPerDay:o.value,daysPerTake:s.value,comments:c.value};if(D()(r.value).isBefore(D()(Date.now()))||o<=0||s<=0)alert("Impossible parameters. Please double check the prescription");else{var d=JSON.parse(JSON.stringify(e.state.prescription));d.medications.push(m),e.setState({prescription:d});var p,u=t.currentTarget.getElementsByTagName("INPUT"),g=Object(k.a)(u);try{for(g.s();!(p=g.n()).done;){p.value.value=""}}catch(h){g.e(h)}finally{g.f()}}},e.handleDelete=function(t){console.log(t);var a=e.state.prescription.medications.filter((function(e,a){return a!==t}));console.log(a),e.setState({prescription:{medications:a}})},e.handleCreate=function(){console.log(e.state.prescription.medications),v.a.post("".concat(b,"/create-prescription/").concat(e.props.match.params.appointmentId),{medications:e.state.prescription.medications},{withCredentials:!0}).then((function(t){e.props.history.push("/calendar")})).catch((function(t){console.log(t),e.setState({errorMsg:"Could not create prescription. Please check that everything is filled out and try again."})}))},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Prescription Form"),l.a.createElement("div",{className:"main-content prescrition-form-card"},l.a.createElement(V,{onCommit:this.handleSubmit}),l.a.createElement("button",{className:"button save-pres-btn",onClick:this.handleCreate},"Save prescription"),l.a.createElement("div",{className:"medications-added-card"},this.state.prescription.medications?this.state.prescription.medications.map((function(t,a){return l.a.createElement(l.a.Fragment,null,l.a.createElement(G,{key:a,id:a,medication:t,onDelete:e.handleDelete})," ",l.a.createElement("hr",null))})):null),l.a.createElement("p",null,this.state.errorMsg)))}}]),a}(n.Component),$=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={loggedInUser:null,usertype:null,errorMsg:"",desiredUrl:null,passwordStrength:""},e.handleSignUp=function(t){t.preventDefault();var a=t.currentTarget,n=a.email,l=a.password,r=a.usertype,i=a.username;v.a.post("".concat(b,"/auth/signup"),{username:i.value,email:n.value,password:l.value,usertype:r.value}).then((function(t){e.props.history.push("/login")})).catch((function(t){e.setState({errorMsg:t.response.data.errorMessage},(function(){return console.log(e.state.errorMsg,t.response)}))}))},e.handleLogIn=function(t){t.preventDefault();var a=t.currentTarget,n=a.email,l=a.password,r=a.usertype;v.a.post("".concat(b,"/auth/login"),{email:n.value,password:l.value,usertype:r.value},{withCredentials:!0}).then((function(t){e.setState({loggedInUser:t.data,usertype:r.value,errorMsg:null},(function(){"patient"===e.state.usertype?window.location.pathname.includes("doctor")?e.props.history.push(window.location.pathname):window.location.pathname.includes("doctor")||e.props.history.push("/profile"):"doctor"===e.state.usertype&&e.props.history.push("/doctor/".concat(e.state.loggedInUser._id))}))})).catch((function(t){e.setState({errorMsg:t.response.data.error})}))},e.handleLogOut=function(t){v.a.post("".concat(b,"/auth/logout"),{},{withCredentials:!0}).then((function(){e.setState({loggedInUser:null,usertype:null,desiredUrl:null},(function(){e.props.history.push("/")}))}))},e.handlePass=function(t){var a=0,n=new RegExp(/^(?=.*[a-z])/),l=new RegExp(/(?=.*[A-Z])/),r=new RegExp(/(?=.*[0-9])/),i=new RegExp(/(?=.*[!@#$%^&*])/),o=new RegExp(/(?=.{8,})/),s=t.currentTarget.value;n.test(s)&&a++,l.test(s)&&a++,r.test(s)&&a++,i.test(s)&&a++,o.test(s)&&a++,0===a&&e.setState({passwordStrength:""}),a<3&&a>0&&e.setState({passwordStrength:"Your password is too weak."}),a<5&&a>=3&&e.setState({passwordStrength:"Almost there, you just need to increase your password strength a little more."}),a>=5&&e.setState({passwordStrength:"Your password is good to go!"}),""===t.currentTarget.value&&e.setState({errorMsg:""})},e.clearError=function(t){""===t.currentTarget.value&&e.setState({errorMsg:""})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.state.loggedInUser||v.a.get("".concat(b,"/user"),{withCredentials:!0}).then((function(t){e.setState({loggedInUser:t.data.loggedInUser,usertype:t.data.usertype})}))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"body"},l.a.createElement(g,{loggedInUser:this.state.loggedInUser,usertype:this.state.usertype,onLogout:this.handleLogOut}),l.a.createElement(J.c,null,l.a.createElement(J.a,{exact:!0,path:"/",render:function(){return l.a.createElement(N,{doctorList1:e.state.doctorList})}}),this.state.loggedInUser?null:l.a.createElement(l.a.Fragment,null,l.a.createElement(J.a,{path:"/login",render:function(){return l.a.createElement(I,{errorMsg:e.state.errorMsg,onClear:e.clearError,onLogIn:e.handleLogIn})}}),l.a.createElement(J.a,{path:"/signup",render:function(){return l.a.createElement(C,{onPass:e.handlePass,passwordStrength:e.state.passwordStrength,onClear:e.clearError,errorMsg:e.state.errorMsg,onSignUp:e.handleSignUp})}}),l.a.createElement(J.a,{path:"/doctor/:doctorId",render:function(t){return l.a.createElement(I,{onClear:e.clearError,errorMsg:e.state.errorMsg,onLogIn:e.handleLogIn})}})),"doctor"===this.state.usertype?l.a.createElement(l.a.Fragment,null,l.a.createElement(J.a,{exact:!0,path:"/calendar",render:function(t){return l.a.createElement(R,Object.assign({loggedInUser:e.state.loggedInUser,usertype:e.state.usertype},t))}}),l.a.createElement(J.a,{path:"/calendar/:appointmentId",render:function(t){return l.a.createElement(W,Object.assign({loggedInUser:e.state.loggedInUser,usertype:e.state.usertype},t))}}),l.a.createElement(J.a,{path:"/doctor/:doctorId",render:function(t){return l.a.createElement(_,Object.assign({loggedInUser:e.state.loggedInUser,usertype:e.state.usertype},t))}}),l.a.createElement(J.a,{path:"/create-prescription/:appointmentId",render:function(t){return l.a.createElement(z,Object.assign({loggedInUser:e.state.loggedInUser,usertype:e.state.usertype},t))}})):null,"patient"===this.state.usertype?l.a.createElement(l.a.Fragment,null,l.a.createElement(J.a,{path:"/profile",render:function(t){return l.a.createElement(j,Object.assign({loggedInUser:e.state.loggedInUser,usertype:e.state.usertype},t))}}),l.a.createElement(J.a,{path:"/appointments",render:function(t){return l.a.createElement(B,Object.assign({loggedInUser:e.state.loggedInUser,usertype:e.state.usertype},t))}}),l.a.createElement(J.a,{path:"/medication-planner",render:function(t){return l.a.createElement(S,Object.assign({loggedInUser:e.state.loggedInUser,usertype:e.state.usertype},t))}}),l.a.createElement(J.a,{path:"/doctor/:doctorId",render:function(t){return l.a.createElement(_,Object.assign({loggedInUser:e.state.loggedInUser,usertype:e.state.usertype},t))}})):null),l.a.createElement(Q,null))}}]),a}(l.a.Component),K=Object(J.f)($);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(d.a,null,l.a.createElement(l.a.StrictMode,null,l.a.createElement(K,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},59:function(e,t,a){e.exports=a(111)},64:function(e,t,a){},72:function(e){e.exports=JSON.parse("{}")}},[[59,1,2]]]);
//# sourceMappingURL=main.5bea1851.chunk.js.map